// bidderPatterns data was extracted from the Prebid project (https://github.com/prebid/headerbid-expert/blob/master/bidderPatterns.j) and is redistributed under 
// the terms of Apache License. See https://github.com/prebid/headerbid-expert/blob/master/license
const bidderPatterns = {
  '33Across': [
    'ssc.33across.com/api/v1/hb'
  ],
  'Aardvark': [
    'thor.rtk.io/*/*/aardvark',
    'bidder.rtk.io/'
  ],
  'Ad4Game': [
    '.ad4game.com/v1/bid'
  ],
  'Adblade': [
    'rtb.adblade.com/prebidjs/bid'
  ],
  'AdBund': [
    'us-east-engine.adbund.xyz/prebid/ad/get',
    'us-west-engine.adbund.xyz/prebid/ad/get'
  ],
  'AdButler': [
    'servedbyadbutler.com/adserve/;type=hbr;'
  ],
  'Adequant': [
    'rex.adequant.com/rex/c2s_prebid?'
  ],
  'Adform': [
    'adx.adform.net/adx/?rp=4'
  ],
  'Adgeneration': [
    'd.socdm.com/adsv/v1',
    'api-test.scaleout.jp/adsv/v1'
  ],
  'Adhese': [
    '.adhese.com/json'
  ],
  'AdKernel': [
    'cpm.metaadserving.com/rtbg'
  ],
  'AdKernelAdn': [
    'tag.adkernel.com/',
    'dsp-staging.adkernel.com/'
  ],
  'Adlive': [
    'api.publishers.adlive.io/get'
  ],
  'ADman': [
    'bidtor.admanmedia.com/prebid'
  ],
  'AdMatic': [
    'ads4.admatic.com.tr/prebid/v3/bidrequest'
  ],
  'AdMedia': [
    'b.admedia.com/banner/prebid/bidder/?'
  ],
  'Admixer': [
    'inv-nets.admixer.net/prebid.aspx'
  ],
  'AdOcean': [
    '.adocean.pl/ad.json'
  ],
  'Adpone': [
    'rtb.adpone.com/bid-request'
  ],
  'AdSpirit': [
    'n1test.adspirit.de/rtb/getbid.php',
    'connected-by.connectad.io/rtb/getbid.php',
    'dsp.xapads.com/rtb/getbid.php'
  ],
  'AdSupply': [
    'engine.4dsply.com/banner.engine?id='
  ],
  'Adtelligent': [
    'hb.adtelligent.com/auction/'
  ],
  'AdUpTech': [
    'rtb.d.adup-tech.com/prebid'
  ],
  'Advangelists': [
    'nep.advangelists.com/xp/get'
  ],
  'Advenue': [
    'ssp.advenuemedia.co.uk/'
  ],
  'Adxcg': [
    '.adxcg.net/get/adi'
  ],
  'Adyoulike': [
    'hb-api.omnitagjs.com/hb-api/prebid'
  ],
  'AerServ': [
    '.aerserv.com/as'
  ],
  'AJA': [
    'ad.as.amanad.adtdp.com/v2/prebid'
  ],
  'Amazon': [
    '.amazon-adsystem.com/e/dtb/bid'
  ],
  'Andbeyond': [
    'cpm.metaadserving.com/'
  ],
  'Aniview': [
    'gov.aniview.com/api/adserver/vast3'
  ],
  'AOL': [
    '.adtechus.com/pubapi*cmd=bid',
    '.adtech.advertising.com/pubapi*cmd=bid',
    '.adtech.de/pubapi*cmd=bid',
    '.adtechjp.com/pubapi*cmd=bid'
  ],
  'Appier':[
    'ad2.apx.appier.net/v1/prebid/bid'
  ],
  'AppNexus': [
    '.adnxs.com/jpt',
    '.adnxs.com/ut*/prebid'
  ],
  'Arteebee': [
    'bidder.mamrtb.com/rtb/bid/arteebee?type=json&register=0'
  ],
  'Atomx': [
    'p.ato.mx/placement'
  ],
  'AudienceS': [
    '.revsci.net/pql'
  ],
  'Beachfront': [
    'reachms.bfmio.com/bid.json?exchange_id='
  ],
  'Bidfluence': [
    'bidfluence.azureedge.net/forge.js'
  ],
  'Bidphysics': [
    'exchange.bidphysics.com/auction'
  ],
  'Brainy': [
    'proparm.co.jp/ssp/p/pbjs'
  ],
  'Bridgewell': [
    'rec.scupio.com/recweb/prebid.aspx'
  ],
  'Brightcom': [
    'brightcombid.marphezis.com/hb'
  ],
  'C1X': [
    'ht-integration.c1exchange.com/ht',
    'ht.c1exchange.com/ht'
  ],
  'Carambola': [
    'hb.carambo.la/hb'
  ],
  'Cedato': [
    'h.cedatoplayer.com/hb'
  ],
  'Centro': [
    '.brand-server.com/hb'
  ],
  'CleanMediaNet': [
    'bidder.cleanmediaads.com/r/'
  ],
  'Clickforce': [
    'ad.doublemax.net/adserver/prebid.json'
  ],
  'Clickonometrics': [
    'delivery.clickonometrics.pl/ortb/prebid/bid'
  ],
  'Coinzilla': [
    'request.czilladx.com/serve/request.php'
  ],
  'CollectCent': [
    'publishers.motionspots.com/'
  ],
  'Colombia': [
    'ade.clmbtech.com/cde/prebid.htm'
  ],
  'Colossus SSP': [
    'colossusssp.com/?c=o&m=multi'
  ],
  'Consumable': [
    'adserver-us.adtech.advertising.com/'
  ],
  'Content Ignite': [
    'serve.connectignite.com/adserve'
  ],
  'Conversant': [
    'web.hb.ad.cpe.dotomi.com/s2s/header',
    'media.msg.dotomi.com/s2s/header'
  ],
  'Cox': [
    'ad.afy11.net/ad'
  ],
  'Criteo': [
    '.criteo.com/delivery/rta/rta.js',
    'bidder.criteo.com/'
  ],
  'DecenterAds': [
    'supply.decenterads.com/'
  ],
  'Dentsu Aegis Network Marketplace': [
    'ads.danmarketplace.com/hb'
  ],
  'DFP': [
    '.doubleclick.net/gampad/ads'
  ],
  'DigitalGarageAds': [
    'ads-tr.bigmining.com/ad/p/bid'
  ],
  'DistrictM': [
    'prebid.districtm.ca/lib.js'
  ],
  'DistrictmDMX': [
    'dmx.districtm.io/b/v1'
  ],
  'Dspx': [
    'buyer.dspx.tv/request/'
  ],
  'E-Planning': [
    'ads.us.e-planning.net/hb'
  ],
  'Emoteev': [
    'prebid.emoteev.io/api/prebid/bid'
  ],
  'Emx Digital': [
    'hb.emxdgt.com/'
  ],
  'EngageBDR': [
    'dsp.bnmla.com/hb'
  ],
  'EPlanning': [
    '.e-planning.net/layers/t_pbjs_'
  ],
  'Essens': [
    'bid.essrtb.com/bid/prebid_call'
  ],
  'Facebook': [
    'an.facebook.com/v2/placementbid.json'
  ],
  'FairTrade': [
    'pool.fair-trademedia.com/hb'
  ],
  'FeatureForward': [
    'prmbdr.featureforward.com/newbidder/bidder1_prm.php?'
  ],
  'Fidelity': [
    'x.fidelity-media.com/delivery/hb.php?'
  ],
  'FreeWheel': [
    'ads.stickyadstv.com/www/delivery/swfIndex.php'
  ],
  'Fyber': [
    'ad-tag.inner-active.mobi/simpleM2M/requestJsonAd'
  ],
  'Gamma SSP': [
    'hb.gammaplatform.com/'
  ],
  'Gamoshi Gambid': [
    'rtb.gambid.io/r/*/bidr'
  ],
  'GetIntent': [
    'cdn.adhigh.net/adserver/hb.js'
  ],
  'Giants': [
    'd.admp.io/hb'
  ],
  'Gjirafa': [
    'gjc.gjirafa.com/Home/GetBid'
  ],
  'GumGum': [
    'g2.gumgum.com/hbid/imp'
  ],
  'GXOne': [
    'ads.gx1as.com/hb'
  ],
  'HIRO Media': [
    'hb-rtb.ktdpublishers.com/bid/get'
  ],
  'HuddledMasses': [
    'huddledmassessupply.com/?banner_id='
  ],
  'IAS': [
    'pixel.adsafeprotected.com/services/pub'
  ],
  'imonomy': [
    'b.imonomy.com/openrtb/hb'
  ],
  'ImproveDigital': [
    'ad.360yield.com/hb'
  ],
  'Index': [
    '.casalemedia.com/cygnus',
    '.casalemedia.com/headertag'
  ],
  'Inneractive': [
    'ad-tag.inner-active.mobi/simpleM2M/requestJsonAd'
  ],
  'Innity': [
    'as.innity.com/synd/?cb='
  ],
  'InSkin': [
    'mfad.inskinad.com/api/v2'
  ],
  'InteractiveOffers': [
    'connect.interactiveoffers.com/api/endpoint.php'
  ],
  'Invibes': [
    'bid.videostep.com/Bid/VideoAdContent'
  ],
  'IQM': [
    'pbd.bids.iqm.com/'
  ],
  'JCM': [
    'media.adfrontiers.com/pq?t=hb&bids='
  ],
  'Justpremium': [
    'cdn-cf.justpremium.com/js'
  ],
  'Kargo': [
    'krk.kargo.com/api/v1/bid'
  ],
  'Komoona': [
    's.komoona.com/',
    'bidder.komoona.com/v1/GetSBids'
  ],
  'Kumma': [
    'hb.kumma.com/'
  ],
  'LoopMe': [
    'loopme.me/api/hb'
  ],
  'Mantis': [
    'mantodea.mantisadnetwork.com/'
  ],
  'Marsmedia': [
    'bid306.rtbsrv.com/bidder/?bid=3mhdom'
  ],
  'Mgid': [
    'dsp.mgid.com/prebid/'
  ],
  'Lifestreet': [
    'ads.lfstmedia.com/getad?'
  ],
  'Livewrapped': [
    'lwadm.com/ad'
  ],
  'LKQD': [
    'ssp.lkqd.net/ad'
  ],
  'Madvertise': [
    'mobile.mng-ads.com/'
  ],
  'Media.net': [
    'prebid.media.net/rtb/prebid'
  ],
  'Meme Global': [
    'stinger.memeglobal.com/api/v1/services/prebid'
  ],
  'MicroAd': [
    's-rtb-pb.send.microad.jp/prebid'
  ],
  'MobFox': [
    'my.mobfox.com/request.php'
  ],
  'My6Sense': [
    'papi.mynativeplatform.com/pub2/web/v1.15.0/hbwidget.json'
  ],
  'Mytarget': [
    'ad.mail.ru/hbid_prebid/'
  ],
  'NanoInteractive': [
    'tmp.audiencemanager.de/hb'
  ],
  'Nasmedia Admixer': [
    'adn.admixer.co.kr/prebid'
  ],
  'NextMillenium': [
    'brainlyads.com/hb/s2s'
  ],
  'NginAd': [
    'server.nginad.com/bid/rtb?'
  ],
  'Oneplanetonly': [
    'show.oneplanetonly.com/prebid'
  ],
  'OneTag': [
    'onetag-sys.com/prebid-request'
  ],
  'Openx': [
    '.servedbyopenx.com/w/1.0/acj',
    '.openx.net/w/1.0/acj',
    '.openx.net/w/1.0/arj',
    '.openx.net/v/1.0/avjp'
  ],
  'Open8': [
    'as.vt.open8.com/v1/control/prebid'
  ],
  'Optimatic': [
    'mg-bid.optimatic.com/adrequest/'
  ],
  'Optimera': [
    's3.amazonaws.com/elasticbeanstalk-us-east-1-397719490216/json/client/'
  ],
  'Orbidder': [
    'orbidder.otto.de/bid'
  ],
  'Orbitsoft': [
    'adserver.com/ads/show/hb'
  ],
  'Otm': [
    'ssp.otm-r.com/adjson'
  ],
  'Ozone': [
    'elb.the-ozone-project.com/openrtb2/auction'
  ],
  'Papyrus': [
    'prebid.papyrus.global/'
  ],
  'Peak226': [
    'a.ad216.com/header_bid'
  ],
  'Piximedia': [
    'static.adserver.pm/prebid'
  ],
  'Platform.io': [
    'js.adx1.com/pb_ortb.js?cb='
  ],
  'PlaygroundXYZ': [
    'ads.playground.xyz/host-config/prebid'
  ],
  'Pollux': [
    'adn.plxnt.com/prebid'
  ],
  'Polymorph': [
    'api.adsnative.com/v1/ad-template.json'
  ],
  'Prebid Server': [
    'prebid.adnxs.com/pbs/v1/auction'
  ],
  'Proximic': [
    '.zqtk.net/'
  ],
  'Pubgears': [
    'b.pubgears.com/nucleus/request'
  ],
  'Pubmatic': [
    '.pubmatic.com/AdServer/AdCallAggregator',
    '.pubmatic.com/AdServer/AdServerServlet',
    '.pubmatic.com/translator'
  ],
  'PubNX': [
    'hb.pubnxserv.com/vzhbidder/bid'
  ],
  'PulsePoint': [
    'bid.contextweb.com/header'
  ],
  'Quantcast': [
    'global.qc.rtb.quantserve.com/qchb'
  ],
  'Quantum': [
    's.sspqns.com/hb'
  ],
  'Rdn': [
    's-bid.rmp.rakuten.co.jp/h'
  ],
  'Readpeak': [
    'app.readpeak.com/header/prebid'
  ],
  'Realvu': [
    'ac.realvu.net/realvu_boost.js'
  ],
  'ReklamStore': [
    'ads.rekmob.com/m/prebid'
  ],
  'RhythmOne': [
    'tag.1rx.io/rmp/*/*/mvo'
  ],
  'Rich Audience': [
    'shb.richaudience.com/'
  ],
  'RockYou': [
    'tas.rockyou.net/servlet/rotator/'
  ],
  'Roxot': [
    'r.rxthdr.com/'
  ],
  'RTB House': [
    '.creativecdn.com/bidder/prebid/bids'
  ],
  'Rtbdemand': [
    'bidding.rtbdemand.com/hb'
  ],
  'RTBdemandADK': [
    'cpm.metaadserving.com/'
  ],
  'Rubicon': [
    '.rubiconproject.com/a/api/fastlane.json',
    '.rubiconproject.com/a/api/ads.json'
  ],
  'Rxrtb': [
    'bid.rxrtb.bid/'
  ],
  'SARA': [
    'ad.sara.media/hb'
  ],
  'Sekindo': [
    'hb.sekindo.com/live/liveView.php?'
  ],
  'ServerBid': [
    'e.serverbid.com/api/v2'
  ],
  'ServerBid Server': [
    'e.serverbid.com/api/v2'
  ],
  'Sharethrough': [
    'btlr.sharethrough.com/header-bid/v1?'
  ],
  'Smart': [
    '.smartadserver.com/prebid'
  ],
  'SmartRtb': [
    'pubs.smrtb.com/json/publisher/prebid'
  ],
  'SmartyAds': [
    'ssp-nj.webtradehub.com/?'
  ],
  'SmileWanted': [
    'prebid.smilewanted.com/'
  ],
  'SomoAudience': [
    'publisher-east.mobileadtrading.com/rtb/bid?s='
  ],
  'Sonobi': [
    '.sonobi.com/trinity.js'
  ],
  'Sortable': [
    'c.deployads.com/openrtb2/auction'
  ],
  'Sovrn': [
    '.lijit.com/rtb/bid'
  ],
  'Spotx': [
    'search.spotxchange.com/openrtb'
  ],
  'SpringServe': [
    'bidder.springserve.com/display/hbid?'
  ],
  'StickyAdsTV': [
    'cdn.stickyadstv.com/mustang/mustang.min.js',
    'cdn.stickyadstv.com/prime-time/intext-roll.min.js',
    'cdn.stickyadstv.com/prime-time/screen-roll.min.js'
  ],
  'Supply2': [
    'pool.supply2.com/hb'
  ],
  'Synacromedia': [
    'prebid.technoratimedia.com/openrtb/bids'
  ],
  'TapHype': [
    'us-central1-taphype-internal.cloudfunctions.net/th-prebid'
  ],
  'TapSense': [
    'ads04.tapsense.com/ads/headerad'
  ],
  'Teads': [
    'a.teads.tv/hb/bid-request'
  ],
  'Teleria': [
    '.ads.tremorhub.com/ad/tag'
  ],
  'TheAdx': [
    'ssp.theadx.com/request'
  ],
  'TheMediaGrid': [
    'grid.bidswitch.net/hb'
  ],
  'ThoughtLeadr': [
    'cdn.thoughtleadr.com/v4'
  ],
  'TIM Media': [
    'hb.timmedia-hb.com/api/v2/services/prebid/'
  ],
  'Trafficroots': [
    'service.trafficroots.com/prebid'
  ],
  'Tremor': [
    '.ads.tremorhub.com/ad/tag'
  ],
  'Trion': [
    'in-appadvertising.com/api/bidRequest?'
  ],
  'TripleLift': [
    'tlx.3lift.com/header/auction?'
  ],
  'Trustx': [
    'sofia.trustx.org/hb'
  ],
  'Twenga': [
    'rtb.t.c4tw.net/Bid?'
  ],
  'ucfunnel': [
    'agent.aralego.com/header?'
  ],
  'Underdog Media': [
    'udmserve.net/udm/img.fetch?tid=1;dt=9;'
  ],
  'Undertone': [
    'hb.undertone.com/hb'
  ],
  'Unruly': [
    'targeting.unrulymedia.com/prebid'
  ],
  'UOL': [
    'prebid.adilligo.com/v1/prebid.json'
  ],
  'Vertamedia': [
    'rtb.vertamedia.com/hb'
  ],
  'Vertoz': [
    'banner.vrtzads.com/vzhbidder/bid?'
  ],
  'Vi': [
    'pb.vi-serve.com/prebid/bid'
  ],
  'Vidazoo': [
    'prebid.cliipa.com/'
  ],
  'VIS.X': [
    't.visx.net/hb'
  ],
  'VMG': [
    'predict.vmg.nyc/'
  ],
  'Vuble': [
    'player.mediabong.net/prebid/request'
  ],
  'WideOrbit': [
    '.atemda.com/JSAdservingMP.ashx'
  ],
  'Widespace': [
    'engine.widespace.com/'
  ],
  'Xendiz': [
    'prebid.xendiz.com/'
  ],
  'Xhb': [
    'ib.adnxs.com/jpt?'
  ],
  'Yieldbot': [
    '.yldbt.com/m/'
  ],
  'Yieldlab': [
    'ad.yieldlab.net/yp/'
  ],
  'Yieldmo': [
    'bid.yieldmo.com/exchange/prebid'
  ],
  'Yieldnexus': [
    'ssp.ynxs.io/r/'
  ],
  'Yieldone': [
    'y.one.impact-ad.jp/h_bid'
  ],
  'Zedo': [
   'z2.zedo.com/asw/fmb.json'
  ]
};

function getBidder(requestUrl) {
  if (! requestUrl) return 
  
  for (let bidder in bidderPatterns) {
    for (let url of bidderPatterns[bidder]) {
      let re = new RegExp(url.replace("*", ".*"));
        if (re.test(requestUrl)) 
        return bidder
    } 
  }
}

module.exports = {
  getBidder: getBidder
}